@{
    var workspaceId = ViewBag.WorkspaceId;
    var teachers = ViewBag.Teachers as List<TaskAssignmentSystem.Models.Users.User>;
    var students = ViewBag.Students as List<TaskAssignmentSystem.Models.Users.User>;
}

<form method="post" asp-action="Create">
    <input type="hidden" name="workspaceId" value="@workspaceId" />
    <div class="mb-3">
        <label class="form-label">Team Name</label>
        <input name="name" class="form-control" required />
    </div>

    <div class="mb-3">
        <label class="form-label">Leader Type</label>
        <select name="leaderType" class="form-select" id="leaderType">
            <option value="Teacher">Teacher</option>
            <option value="Student">Student</option>
        </select>
    </div>

    <div class="mb-3" id="teacherDropdown" >
        <label class="form-label">Select Teacher</label>
        <select name="teacherUserId" class="form-select">
            @foreach (var t in teachers)
            {
                <option value="@t.Id">@t.FullName (@t.Username)</option>
            }
        </select>
    </div>

    <div class="mb-3" id="studentDropdown" style="display:none;">
        <label class="form-label">Select Student</label>
        <select name="studentUserId" class="form-select">
            @foreach (var s in students)
            {
                <option value="@s.Id">@s.FullName (@s.Username)</option>
            }
        </select>
    </div>

    <button class="btn btn-primary" type="submit">Create</button>
</form>

@section Scripts {
    <script>
        var leaderType = document.getElementById('leaderType');
        var teacherDiv = document.getElementById('teacherDropdown');
        var studentDiv = document.getElementById('studentDropdown');

        leaderType.addEventListener('change', function(){
            if(this.value === 'Teacher'){
                teacherDiv.style.display='block';
                studentDiv.style.display='none';
            } else {
                teacherDiv.style.display='none';
                studentDiv.style.display='block';
            }
        });
    </script>
}
